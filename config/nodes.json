{
  "node_groups": {
    "consul_cluster": {
      "consul-0": {
        ":base": "puppetlabs/centos-6.6-64-nocm",
        ":ip": "172.20.20.10",
        ":role": "consul_server",
        ":memory": 1024,
        ":cpus": 1,
        "ports": [
          {
            ":host": 8500,
            ":guest": 8500,
            ":id": "consul"
          }
        ],
        "scripts": [
          "unzip /tmp/synced_folder/consul_0.7.1_linux_amd64.zip -d /tmp",
          "sudo mv /tmp/consul /usr/bin",
          "sudo mkdir /etc/consul.d",
          "sudo iptables -I INPUT 1 -p tcp --dport 8300 -j ACCEPT",
          "sudo iptables -I INPUT 1 -p tcp --dport 8301 -j ACCEPT",
          "sudo iptables -I INPUT 1 -p tcp --dport 8500 -j ACCEPT"
        ]
      },
      "consul-1": {
        ":base": "puppetlabs/centos-6.6-64-nocm",
        ":ip": "172.20.20.11",
        ":role": "consul_server",
        ":memory": 1024,
        ":cpus": 1,
        "ports": [
          {
            ":host": 8501,
            ":guest": 8500,
            ":id": "consul"
          }
        ],
        "scripts": [
          "unzip /tmp/synced_folder/consul_0.7.1_linux_amd64.zip -d /tmp",
          "sudo mv /tmp/consul /usr/bin",
          "sudo mkdir /etc/consul.d",
          "sudo iptables -I INPUT 1 -p tcp --dport 8300 -j ACCEPT",
          "sudo iptables -I INPUT 1 -p tcp --dport 8301 -j ACCEPT",
          "sudo iptables -I INPUT 1 -p tcp --dport 8500 -j ACCEPT"
        ]
      },
      "consul-2": {
        ":base": "puppetlabs/centos-6.6-64-nocm",
        ":ip": "172.20.20.12",
        ":role": "consul_server",
        ":memory": 1024,
        ":cpus": 1,
        "ports": [
          {
            ":host": 8502,
            ":guest": 8500,
            ":id": "consul"
          }
        ],
        "scripts": [
          "unzip /tmp/synced_folder/consul_0.7.1_linux_amd64.zip -d /tmp",
          "sudo mv /tmp/consul /usr/bin",
          "sudo mkdir /etc/consul.d",
          "sudo iptables -I INPUT 1 -p tcp --dport 8300 -j ACCEPT",
          "sudo iptables -I INPUT 1 -p tcp --dport 8301 -j ACCEPT",
          "sudo iptables -I INPUT 1 -p tcp --dport 8500 -j ACCEPT"
        ]
      }
    }
  }
}
